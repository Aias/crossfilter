// https://crossfilter.github.io/crossfilter/ v1.5.4 Copyright 2026 Mike Bostock
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self).crossfilter=r()}(this,(function(){"use strict";function t(t){const r=new Array(t);let n=-1;for(;++n<t;)r[n]=0;return r}function r(t,r){if(!Array.isArray(t)){if(t.length>=r)return t;let n;return n=t instanceof Uint8Array?new Uint8Array(r):t instanceof Uint16Array?new Uint16Array(r):new Uint32Array(r),n.set(t),n}let n=t.length;for(;n<r;)t[n++]=0;return t}function n(t,r){if(!Array.isArray(t)){let n;switch(r){case 16:n=new Uint16Array(t.length);break;case 32:n=new Uint32Array(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}if(r>32)throw new Error("invalid array width!");return t}const e={array8:"undefined"!=typeof Uint8Array?t=>new Uint8Array(t):t,array16:"undefined"!=typeof Uint16Array?t=>new Uint16Array(t):t,array32:"undefined"!=typeof Uint32Array?t=>new Uint32Array(t):t,arrayLengthen:r,arrayWiden:n,bitarray:class{constructor(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this.subarrayData=["undefined"!=typeof Uint8Array?new Uint8Array(r):t(r)]}getSubarray(t){return this.subarrayData[t]}setSubarray(t,r){this.subarrayData[t]=r}lengthen(t){for(let n=0;n<this.subarrays;++n)this.subarrayData[n]=r(this.subarrayData[n],t);this.length=t}add(){let r,e,o;for(let t=0;t<this.subarrays;++t)if(r=this.masks[t],e=this.width-32*t,o=(~r&r+1)>>>0,!(e>=32)||o)return e<32&&o&1<<e&&(this.subarrayData[t]=n(this.subarrayData[t],e<<=1),this.width=32*t+e),this.masks[t]|=o,{offset:t,one:o};return this.subarrayData[this.subarrays]="undefined"!=typeof Uint8Array?new Uint8Array(this.length):t(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}}copy(t,r){for(let n=0;n<this.subarrays;++n)this.subarrayData[n][t]=this.subarrayData[n][r]}truncate(t){for(let r=0;r<this.subarrays;++r)for(let n=this.length-1;n>=t;n--)this.subarrayData[r][n]=0;this.length=t}zero(t){for(let r=0;r<this.subarrays;++r)if(this.subarrayData[r][t])return!1;return!0}zeroExcept(t,r,n){for(let e=0;e<this.subarrays;++e)if(e===r?this.subarrayData[e][t]&n:this.subarrayData[e][t])return!1;return!0}zeroExceptMask(t,r){for(let n=0;n<this.subarrays;++n)if(this.subarrayData[n][t]&r[n])return!1;return!0}only(t,r,n){for(let e=0;e<this.subarrays;++e)if(this.subarrayData[e][t]!=(e===r?n:0))return!1;return!0}onlyExcept(t,r,n,e,o){let u;for(let a=0;a<this.subarrays;++a)if(u=this.subarrayData[a][t],a===r&&(u=(u&n)>>>0),u!=(a===e?o:0))return!1;return!0}orAt(t,r,n){this.subarrayData[t][r]|=n}xorAt(t,r,n){this.subarrayData[t][r]^=n}andAt(t,r,n){this.subarrayData[t][r]&=n}getAt(t,r){return this.subarrayData[t][r]}}};var o=(t,r)=>n=>{const e=n.length;return[t.left(n,r,0,e),t.right(n,r,0,e)]},u=(t,r)=>{const n=r[0],e=r[1];return r=>{const o=r.length;return[t.left(r,n,0,o),t.left(r,e,0,o)]}},a=t=>[0,t.length],i=t=>t,f=()=>0;function s(t){function r(r,n,e,o){const u=r[--o+n],a=t(u);let i;for(;(i=n<<1)<=e&&(i<e&&t(r[o+i])>t(r[o+i+1])&&i++,!(a<=t(r[o+i])));)r[o+n]=r[o+i],n=i;r[o+n]=u}function n(t,n,e){return function(t,n,e){const o=e-n;let u=1+(o>>>1);for(;--u>0;)r(t,u,o,n);return t}(t,n,e)}return n.sort=function(t,n,e){let o,u=e-n;for(;--u>0;)o=t[n],t[n]=t[n+u],t[n+u]=o,r(t,1,u,n);return t},n}const l=s((t=>t));function c(t,r,n){return l(t,r,n)}c.sort=l.sort,c.by=s;const h=c;function d(t){const r=h.by(t);return function(n,e,o,u){u=Math.min(o-e,u);const a=new Array(u);let i,f,s;for(f=0;f<u;++f)a[f]=n[e++];if(r(a,0,u),e<o){i=t(a[0]);do{t(s=n[e])>i&&(a[0]=s,i=t(r(a,0,u)[0]))}while(++e<o)}return a}}const y=d((t=>t));function p(t,r,n,e){return y(t,r,n,e)}p.by=d;const g=p,b=t=>null==t?t:"object"==typeof t?t.valueOf():t,A=(t,r)=>{const n=b(t),e=b(r);if("string"==typeof n&&"string"==typeof e)return n<e?-1:n>e?1:0;const o=Number(n),u=Number(e);return o<u?-1:o>u?1:0};function v(t){function r(r,n,e,o){for(;e<o;){const u=e+o>>>1;A(n,t(r[u]))<0?o=u:e=u+1}return e}return Object.assign(r,{right:r,left:function(r,n,e,o){for(;e<o;){const u=e+o>>>1;A(t(r[u]),n)<0?e=u+1:o=u}return e}})}const x=v(i),m=Object.assign(x,{by:v});var k=(t,r,n)=>{const e=r.length,o=n?JSON.parse(JSON.stringify(Array.from(t))):new Array(e);for(let n=0;n<e;++n)o[n]=t[r[n]];return o};var w=(t,r,n)=>t+1,E=(t,r,n)=>t-1,z=t=>(r,n,e,o)=>r+ +t(n),D=t=>(r,n,e,o)=>r-t(n);const O=(t,r)=>{const n=t[r];return function(t){return"function"==typeof t}(n)?n.call(t):n},U=/\[([\w\d]+)\]/g;const N=()=>{},M=()=>{},S=-1,C=t=>null==t?t:"object"==typeof t?t.valueOf():t,j=(t,r)=>{const n=C(t),e=C(r);if("string"==typeof n&&"string"==typeof e)return n<e?-1:n>e?1:0;const o=Number(n),u=Number(e);return o<u?-1:o>u?1:0},F=(t,r)=>j(t,r),L=t=>{const r=C(t);return void 0===r||"number"==typeof r&&Number.isNaN(r)},W=function(t){const r={add:b,remove:function(t){const r=new Array(l),e=[],o="function"==typeof t;for(let a=0,i=0;a<l;++a)u=a,(o?t(s[u],u):n.zero(u))?(e.push(a),r[a]=S):r[a]=i++;var u;let a,i;for(c.forEach((function(t){t(-1,-1,[],e,!0)})),y.forEach((function(t){t(r)})),a=0,i=0;a<l;++a)r[a]!==S&&(a!==i&&(n.copy(i,a),s[i]=s[a]),++i);s.length=l=i,n.truncate(i),v("dataRemoved")},dimension:function(t,r){function p(t){if("string"==typeof t){const r=t;return function(t){return function(t,r,n,e,o){for(o in e=(n=n.split(".")).splice(-1,1),n)r=r[n[o]]=r[n[o]]||{};return t(r,e)}(O,t,r.replace(U,".$1"))}}return t}let b,A=null,x=null;C=r,!0===C?(A=p(t),b=A):(x=p(t),b=x);var C;const W={filter:function(t){return null==t?pt():Array.isArray(t)?yt(t):"function"==typeof t?gt(t):dt(t)},filterExact:dt,filterRange:yt,filterFunction:gt,filterAll:pt,currentFilter:function(){return Z},hasCurrentFilter:function(){return nt?rt:void 0},top:function(t,e){const o=[];let u,a=at,i=0;e&&e>0&&(i=e);for(;--a>=ut&&t>0;)n.zero(u=I[a])&&(i>0?--i:(o.push(s[u]),--t));if(r)for(a=0;a<X.length&&t>0;a++)n.zero(u=X[a])&&(i>0?--i:(o.push(s[u]),--t));return o},bottom:function(t,e){const o=[];let u,a,i=0;e&&e>0&&(i=e);if(r)for(u=0;u<X.length&&t>0;u++)n.zero(a=X[u])&&(i>0?--i:(o.push(s[a]),--t));u=ut;for(;u<at&&t>0;)n.zero(a=I[u])&&(i>0?--i:(o.push(s[a]),--t)),u++;return o},group:function(t){if(t)return At(t,!1);const r=t=>t;return At(r,!1)},groupAll:function(){const t=At((t=>null),!0,null),r={reduce:function(n,e,o){return t.reduce(n,e,o),r},reduceCount:function(){return t.reduceCount(),r},reduceSum:function(n){return t.reduceSum(n),r},value:function(){const r=t.all();return r.length?r[0].value:0},dispose:function(){return t.dispose(),r},remove:function(){return t.remove(),r}};return r},dispose:vt,remove:vt,accessor:b,id:function(){return G}};let $,q,B,G,H=[],I=[],K=[],P=[],Q=[],V=[],X=[];const Y=function(t){return Array.from(R(t)).sort((function(t,r){const n=j(K[t],K[r]);return 0!==n?n:t-r}))};let Z,_=a,tt=null,rt=!1,nt=!1;const et=[],ot=[];let ut=0,at=0,it=0;d.unshift(st),d.push(lt),y.push(ct);const ft=n.add();function st(t,o,u){let a,i,f=[],s=[];const c=!0===r;if(c){const r=A;if(!r)return;for(it=0,a=0;a<t.length;a++){const n=r(t[a]);for(i=0;i<n.length;i++)it++}K=[],f=R(t.length),s=J(it,1);const n=R(it);for(let e=0,u=0;u<t.length;u++){const a=r(t[u]);if(a.length)for(f[u]=a.length,i=0;i<a.length;i++)K.push(a[i]),n[e]=u,e++;else f[u]=0,X.push(u+o)}const e=Y(it);K=k(K,e),P=k(n,e)}else{const r=x;if(!r)return;K=t.map(r),P=Y(u),K=k(K,P)}const h=_(K);let d,y,p,g=h[0],b=h[1];if(c)if(u=it,tt)for(d=0;d<u;++d)tt(K[d],d)||(0==--f[P[d]]&&n.orAt(B,P[d]+o,$),s[d]=1);else{for(y=0;y<g;++y)0==--f[P[y]]&&n.orAt(B,P[y]+o,$),s[y]=1;for(p=b;p<u;++p)0==--f[P[p]]&&n.orAt(B,P[p]+o,$),s[p]=1}else if(tt)for(d=0;d<u;++d)tt(K[d],d)||n.orAt(B,P[d]+o,$);else{for(y=0;y<g;++y)n.orAt(B,P[y]+o,$);for(p=b;p<u;++p)n.orAt(B,P[p]+o,$)}if(!o)return H=K,I=P,c&&(Q=f,V=s),ut=g,void(at=b);const v=H,m=I,w=V;let E=0,z=0;if(a=0,r&&(E=o,o=v.length,u=it),H=new Array(r?o+u:l),I=r?new Array(o+u):J(l,l),r&&(V=J(o+u,1)),r){const t=Q.length;Q=e.arrayLengthen(Q,l);for(let r=0;r+t<l;r++)Q[r+t]=f[r]}let D=0;for(;a<o&&z<u;++D)j(v[a],K[z])<0?(H[D]=v[a],r&&(V[D]=w[a]),I[D]=m[a++]):(H[D]=K[z],r&&(V[D]=s[z]),I[D]=P[z++]+(r?E:o));for(;a<o;++a,++D)H[D]=v[a],r&&(V[D]=w[a]),I[D]=m[a];for(;z<u;++z,++D)H[D]=K[z],r&&(V[D]=s[z]),I[D]=P[z]+(r?E:o);const O=_(H);ut=O[0],at=O[1]}function lt(t,r,n){et.forEach((function(t){t(K,P,r,n)})),K=[],P=[]}function ct(t){let n,e;if(r){for(n=0,e=0;n<X.length;n++)t[X[n]]!==S&&(X[e]=t[X[n]],e++);for(X.length=e,n=0,e=0;n<l;n++)t[n]!==S&&(e!==n&&(Q[e]=Q[n]),e++);Q=Q.slice(0,e)}const o=H.length;let u,a=0;for(let n=0;n<o;++n)u=I[n],t[u]!==S&&(n!==a&&(H[a]=H[n]),I[a]=t[u],r&&(V[a]=V[n]),++a);for(H.length=a,r&&(V=V.slice(0,a));a<o;)I[a++]=0;const i=_(H);ut=i[0],at=i[1]}function ht(t){const e=t[0],o=t[1];if(tt)return tt=null,bt((function(t,r){return e<=r&&r<o}),0===t[0]&&t[1]===H.length),ut=e,at=o,W;let u,i,f;const s=[],l=[],h=[],d=[];if(e<ut)for(u=e,i=Math.min(ut,o);u<i;++u)s.push(I[u]),h.push(u);else if(e>ut)for(u=ut,i=Math.min(e,at);u<i;++u)l.push(I[u]),d.push(u);if(o>at)for(u=Math.max(e,at),i=o;u<i;++u)s.push(I[u]),h.push(u);else if(o<at)for(u=Math.max(ut,o),i=at;u<i;++u)l.push(I[u]),d.push(u);let y=s,p=l;if(r){const t=[],r=[];for(u=0;u<s.length;u++)Q[s[u]]++,V[h[u]]=0,1===Q[s[u]]&&(n.xorAt(B,s[u],$),t.push(s[u]));for(u=0;u<l.length;u++)Q[l[u]]--,V[d[u]]=1,0===Q[l[u]]&&(n.xorAt(B,l[u],$),r.push(l[u]));if(y=t,p=r,_===a)for(u=0;u<X.length;u++)f=X[u],n.getAt(B,f)&$&&(n.xorAt(B,f,$),y.push(f));else for(u=0;u<X.length;u++)f=X[u],n.getAt(B,f)&$||(n.xorAt(B,f,$),p.push(f))}else{for(u=0;u<s.length;u++)n.xorAt(B,s[u],$);for(u=0;u<l.length;u++)n.xorAt(B,l[u],$)}return ut=e,at=o,c.forEach((function(t){t($,B,y,p)})),v("filtered"),W}function dt(t){return Z=t,rt=!0,nt=!0,ht((_=o(m,t))(H))}function yt(t){return Z=t,rt=!0,nt=!0,ht((_=u(m,t))(H))}function pt(){return Z=void 0,rt=!1,ht((_=a)(H))}function gt(t){Z=t,rt=!0,nt=!0,tt=t,_=a,bt(t,!1);const r=_(H);return ut=r[0],at=r[1],W}function bt(t,e){let o,u,a,i=[],f=[];const s=[],l=[],h=H.length;if(!r)for(o=0;o<h;++o)u=I[o],!(0!=(n.getAt(B,u)&$))!=!!(a=t(H[o],o))&&(a?i.push(u):f.push(u));if(r)for(o=0;o<h;++o)t(H[o],o)?(i.push(I[o]),s.push(o)):(f.push(I[o]),l.push(o));if(r){const t=[],r=[];for(o=0;o<i.length;o++)1===V[s[o]]&&(Q[i[o]]++,V[s[o]]=0,1===Q[i[o]]&&(n.xorAt(B,i[o],$),t.push(i[o])));for(o=0;o<f.length;o++)0===V[l[o]]&&(Q[f[o]]--,V[l[o]]=1,0===Q[f[o]]&&(n.xorAt(B,f[o],$),r.push(f[o])));if(i=t,f=r,e)for(o=0;o<X.length;o++)u=X[o],n.getAt(B,u)&$&&(n.xorAt(B,u,$),i.push(u));else for(o=0;o<X.length;o++)u=X[o],n.getAt(B,u)&$||(n.xorAt(B,u,$),f.push(u))}else{for(o=0;o<i.length;o++)n.getAt(B,i[o])&$&&n.andAt(B,i[o],q);for(o=0;o<f.length;o++)n.getAt(B,f[o])&$||n.orAt(B,f[o],$)}c.forEach((function(t){t($,B,i,f)})),v("filtered")}function At(t,o,u){const a={top:function(t){const r=x(Y(),0,d.length,t);return m.sort(r,0,r.length)},all:Y,reduce:Z,reduceCount:_,reduceSum:function(t){return Z(z(t),D(t),f)},order:tt,orderNatural:function(){return tt(i)},size:function(){return v},dispose:rt,remove:rt};ot.push(a);let d=[],p={kind:"1d",data:[]},b=8,A=T(b),v=0,x=g.by((t=>t.value)),m=h.by((t=>t.value)),k=w,O=E,U=f,C=N,j=M,W=!0,R=0;function G(a,i,f,h){r&&(R=f,f=H.length-a.length,h=a.length);const y=d;let g=r?[]:J(v,A);const x=v;let m,w,E,z,D=0,S=0;for(d=new Array(v),v=0,p=r?x&&"2d"===p.kind?p:{kind:"2d",data:[]}:x>1&&"1d"===p.kind?function(t,r){if("1d"===t.kind)return{kind:"1d",data:e.arrayLengthen(t.data,r)};return t}(p,l):{kind:"1d",data:J(l,A)},x&&(w=y[0],E=w.key);S<h&&(z=t(a[S]),L(z));)S++;for(;S<h&&void 0!==z;){let e,o;for(w&&void 0!==E&&F(E,z)<=0?(e=w,o=E,g[D]=v,w=y[++D],w&&(E=w.key)):(e={key:z,value:U()},o=z),d[v]=e;F(z,o)<=0&&(m=i[S]+(r?R:f),"2d"===p.kind?p.data[m]?p.data[m].push(v):p.data[m]=[v]:p.data[m]=v,W||(e.value=k(e.value,s[m],!0),n.zeroExcept(m,B,q)||(e.value=O(e.value,s[m],!1))),S++,!(S>=h));){for(z=t(a[S]);S<h&&L(z)&&(S++,!(S>=h));)z=t(a[S]);if(S>=h)break}$()}for(;D<x;)d[g[D]=v]=y[D++],$();if("2d"===p.kind)for(let t=0;t<l;t++)p.data[t]||(p.data[t]=[]);if(v>D)if("2d"===p.kind)for(D=0;D<R;++D)for(let t=0;t<p.data[D].length;t++)p.data[D][t]=g[p.data[D][t]];else for(D=0;D<f;++D)p.data[D]=g[p.data[D]];function $(){r?v++:++v===A&&(g=e.arrayWiden(g,b<<=1),p=function(t,r){if("1d"===t.kind)return{kind:"1d",data:e.arrayWiden(t.data,r)};return t}(p,b),A=T(b))}m=c.indexOf(C),v>1||r?(C=P,j=V):(!v&&o&&function(t){return void 0!==t}(u)&&(v=1,d=[{key:u,value:U()}]),1===v?(C=Q,j=X):(C=N,j=M),p={kind:"1d",data:[]}),c[m]=C}function K(t){if(v>1||r){const n=v,e=d,o=J(n,n);let u,a,i;if("1d"===p.kind)for(u=0,i=0;u<l;++u)t[u]!==S&&(o[p.data[i]=p.data[u]]=1,++i);else{for(u=0,i=0;u<l;++u)if(t[u]!==S){for(p.data[i]=p.data[u],a=0;a<p.data[i].length;a++)o[p.data[i][a]]=1;++i}p={kind:"2d",data:p.data.slice(0,i)}}for(d=[],v=0,u=0;u<n;++u)o[u]&&(o[u]=v++,d.push(e[u]));if(v>1||r)if("1d"===p.kind)for(u=0;u<i;++u)p.data[u]=o[p.data[u]];else for(u=0;u<i;++u)for(a=0;a<p.data[u].length;++a)p.data[u][a]=o[p.data[u][a]];c[c.indexOf(C)]=v>1||r?(j=V,C=P):1===v?(j=X,C=Q):(j=M,C=N)}else if(1===v){if(o)return;for(let r=0;r<l;++r)if(t[r]!==S)return;d=[],v=0,j=M,c[c.indexOf(C)]=C=N}}function P(t,r,e,o,u){if(t===$&&r===B||W)return;const a=!0===u;let i,f,l,c,h;if("2d"!==p.kind){for(i=0,c=e.length;i<c;++i)n.zeroExcept(l=e[i],B,q)&&(h=d[p.data[l]],h.value=k(h.value,s[l],!1));for(i=0,c=o.length;i<c;++i)n.onlyExcept(l=o[i],B,q,r,t)&&(h=d[p.data[l]],h.value=O(h.value,s[l],a))}else{for(i=0,c=e.length;i<c;++i)if(n.zeroExcept(l=e[i],B,q))for(f=0;f<p.data[l].length;f++)h=d[p.data[l][f]],h.value=k(h.value,s[l],!1,f);for(i=0,c=o.length;i<c;++i)if(n.onlyExcept(l=o[i],B,q,r,t))for(f=0;f<p.data[l].length;f++)h=d[p.data[l][f]],h.value=O(h.value,s[l],a,f)}}function Q(t,r,e,o,u){if(t===$&&r===B||W)return;const a=!0===u;let i,f,l;const c=d[0];for(i=0,l=e.length;i<l;++i)n.zeroExcept(f=e[i],B,q)&&(c.value=k(c.value,s[f],!1));for(i=0,l=o.length;i<l;++i)n.onlyExcept(f=o[i],B,q,r,t)&&(c.value=O(c.value,s[f],a))}function V(){let t,r,e;for(t=0;t<v;++t)d[t].value=U();if("2d"!==p.kind){for(t=0;t<l;++t)e=d[p.data[t]],e.value=k(e.value,s[t],!0);for(t=0;t<l;++t)n.zeroExcept(t,B,q)||(e=d[p.data[t]],e.value=O(e.value,s[t],!1))}else{for(t=0;t<l;++t)for(r=0;r<p.data[t].length;r++)e=d[p.data[t][r]],e.value=k(e.value,s[t],!0,r);for(t=0;t<l;++t)if(!n.zeroExcept(t,B,q))for(r=0;r<p.data[t].length;r++)e=d[p.data[t][r]],e.value=O(e.value,s[t],!1,r)}}function X(){let t;const r=d[0];for(r.value=U(),t=0;t<l;++t)r.value=k(r.value,s[t],!0);for(t=0;t<l;++t)n.zeroExcept(t,B,q)||(r.value=O(r.value,s[t],!1))}function Y(){return W&&(j(),W=!1),d}function Z(t,r,n){return k=t,O=r,U=n,W=!0,a}function _(){return Z(w,E,f)}function tt(t){function r(r){return t(r.value)}return x=g.by(r),m=h.by(r),a}function rt(){let t=c.indexOf(C);return t>=0&&c.splice(t,1),t=et.indexOf(G),t>=0&&et.splice(t,1),t=y.indexOf(K),t>=0&&y.splice(t,1),t=ot.indexOf(a),t>=0&&ot.splice(t,1),a}return c.push(C),et.push(G),y.push(K),G(H,I,0,l),_().orderNatural()}function vt(){ot.forEach((function(t){t.dispose()}));let t=d.indexOf(st);return t>=0&&d.splice(t,1),t=d.indexOf(lt),t>=0&&d.splice(t,1),t=y.indexOf(ct),t>=0&&y.splice(t,1),n.masks[B]&=q,pt()}return B=ft.offset,$=ft.one,q=~$,G=B<<7|Math.log($)/Math.log(2),st(s,0,l),lt(s,0,l),W},groupAll:function(){const t={reduce:y,reduceCount:p,reduceSum:function(t){return y(z(t),D(t),f)},value:function(){a&&(!function(){let t;for(r=u(),t=0;t<l;++t)r=e(r,s[t],!0),n.zero(t)||(r=o(r,s[t],!1))}(),a=!1);return r},dispose:g,remove:g};let r=0,e=w,o=E,u=f,a=!0;function i(t,u,i){let f;if(!a)for(f=u;f<l;++f)r=e(r,s[f],!0),n.zero(f)||(r=o(r,s[f],!1))}function h(t,u,i,f,l){const c=!0===l;let h,d,y;if(!a){for(h=0,y=i.length;h<y;++h)n.zero(d=i[h])&&(r=e(r,s[d],c));for(h=0,y=f.length;h<y;++h)n.only(d=f[h],u,t)&&(r=o(r,s[d],c))}}function y(r,n,i){return e=r,o=n,u=i,a=!0,t}function p(){return y(w,E,f)}function g(){let r=c.indexOf(h);return r>=0&&c.splice(r,1),r=d.indexOf(i),r>=0&&d.splice(r,1),t}return c.push(h),d.push(i),i(s,0),p()},size:function(){return l},all:function(){return s},allFiltered:function(t){const r=[],e=A(t||[]);for(let t=0;t<l;t++)n.zeroExceptMask(t,e)&&r.push(s[t]);return r},onChange:function(t){if("function"!=typeof t)return console.warn("onChange callback parameter must be a function!"),()=>{};return p.push(t),function(){p.splice(p.indexOf(t),1)}},isElementFiltered:function(t,r){const e=A(r||[]);return n.zeroExceptMask(t,e)}};let n,s=[],l=0;const c=[],d=[],y=[],p=[];function b(t){const e=l,o=t.length;return o&&(s=s.concat(t),n.lengthen(l+=o),d.forEach((function(r){r(t,e,o)})),v("dataAdded")),r}function A(t){const r=new Array(n.subarrays);for(let t=0;t<n.subarrays;t++)r[t]=-1;for(let n=0,e=t.length;n<e;n++){const e=t[n].id();r[e>>7]&=~(1<<(63&e))}return r}function v(t){for(let r=0;r<p.length;r++)p[r](t)}return n=new e.bitarray(0),void 0!==t?b(t):r};function J(t,r){return(r<257?e.array8:r<65537?e.array16:e.array32)(t)}function R(t){const r=J(t,t);for(let n=-1;++n<t;)r[n]=n;return r}function T(t){return 8===t?256:16===t?65536:4294967296}W.heap=h,W.heapselect=g,W.bisect=m,W.permute=k;return W.version="1.5.4",W}));
